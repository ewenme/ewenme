<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"  lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1"/>

<title>FPL Mythbusting with fplr | ewen</title>

<meta property='og:title' content='FPL Mythbusting with fplr - ewen'>
<meta property='og:description' content='Dissecting fantasy football falsehoods with my first R package.'>
<meta property='og:url' content='/2017/06/25/fpl-mythbusting-with-fplr/'>
<meta property='og:site_name' content='ewen'>
<meta property='og:type' content='article'><meta property='article:published_time' content='2017-06-25T00:00:00Z'/><meta property='article:modified_time' content='2017-06-25T00:00:00Z'/><meta name='twitter:card' content='summary'><meta name='twitter:site' content='@ewen_'><meta name='twitter:creator' content='@ewen_'>
<link rel="stylesheet" href="/css/foundation.css" rel="stylesheet" id="theme-stylesheet">
<script src="/js/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
<link rel="stylesheet" href="/css/style.css"/><link rel='stylesheet' href='/css/custom.css'></head>
<body>

<section class="section">
  <div class="container">
    <nav class="nav">
      <div class="nav-left">
        <a class="nav-item" href="/"><h1 class="title is-4">ewen</h1></a>
      </div>
      <div class="nav-right">
        <nav class="nav-item level is-mobile"><a class="level-item" href='mailto:ewenhenderson@gmail.com' target='_blank' rel='noopener'>
            <span class="icon">
              <i class><svg viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
    
    <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/>
    <polyline points="22,6 12,13 2,6"/>
    
  </svg></i>
            </span>
          </a><a class="level-item" href='https://github.com/ewenme' target='_blank' rel='noopener'>
            <span class="icon">
              <i class><svg viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
    
    <path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"/>
    
  </svg></i>
            </span>
          </a><a class="level-item" href='https://twitter.com/ewen_' target='_blank' rel='noopener'>
            <span class="icon">
              <i class><svg viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
    
    <path d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"/>
    
  </svg></i>
            </span>
          </a></nav>
      </div>
    </nav>
  </div>
</section>

<section class="section">
  <div class="container">
    <div class="subtitle is-6 is-pulled-right">
      
      
<a class="subtitle is-6" href="/tags/r">#r</a>



  
  | <a class="subtitle is-6" href="/tags/package">#package</a>
  
  | <a class="subtitle is-6" href="/tags/fpl">#fpl</a>
  
  | <a class="subtitle is-6" href="/tags/fplr">#fplr</a>
  

      
    </div>
    <h2 class="subtitle is-6">June 25, 2017</h2>
    <h1 class="title">FPL Mythbusting with fplr</h1>
    
    <div class="content">
      <p>I recently authored my first R package (and definitely have the bug, now). It would be remiss of me to continue without a quick PSA for anyone out there thinking about dabbling in the package game - below is a shout-out of the invaluable resources I found along the way that kept me nice and sane.</p>
<blockquote class="twitter-tweet" data-lang="en">
<p lang="en" dir="ltr">
ease in <a href="https://t.co/NdRYGE1whA">https://t.co/NdRYGE1whA</a><br>more detail <a href="https://t.co/ypqotSAF46">https://t.co/ypqotSAF46</a><br>best practice <a href="https://t.co/qRMZDXBdfQ">https://t.co/qRMZDXBdfQ</a><br>travis 💀 <a href="https://t.co/dEvM3PWsVb">https://t.co/dEvM3PWsVb</a>
</p>
— ewen (<span class="citation">@ewen_</span>) <a href="https://twitter.com/ewen_/status/872480326890795009">June 7, 2017</a>
</blockquote>
<script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script>
<p>I set out on my package contribution journey by focusing on the development of something that I myself would find useful (that way, I could keep at least one user happy). Each year, I play an edition of a fantasy sports game called <a href="https://fantasy.premierleague.com/">Fantasy Premier League</a> (FPL), the official fantasy football game of England’s top football division. If you really want to know the in’s and out’s of FPL, there’s a <a href="https://fantasy.premierleague.com/a/help">section of the site</a> just for rules.</p>
<blockquote>
<p>TL;DR: for 38 rounds (called ‘gameweeks’), you pick a team of football players to do good things that score you points and help you finish as high up the leader-board as possible.<a href="#fn1" class="footnoteRef" id="fnref1"><sup>1</sup></a></p>
</blockquote>
<p>Introducing…<a href="https://ewenme.github.io/fplr/"><code>fplr</code></a> - a package for the intersection of FPL players / R users like me (I hope it’s not just me) to explore the game’s data. In the rest of this post, I test drive the package by examining some aspects of the game that the community has long debated on. I won’t necessarily dispel/confirm all of these things here, but it’s a taster of what kinds of analyses can be spun up quickly using <code>fplr</code>.</p>
<div id="the-early-season-rat-race" class="section level2">
<h2>The early season rat race</h2>
<p>Many users emphasise the importance of a good start, claiming that it is more difficult to do well in the latter stages of the season without a solid foundation built early on. To illustrate this, lets look at the average shift in overall rank by gameweek in one of my mini-leagues (a smaller league amongst a peer group) as the season progresses i.e. how much does a users rank change from week-to-week (N.B. in the current package version, I haven’t developed a function to help make this easier, yet. Soon come)?</p>
<p><img src="/blog/fpl-mythbusting-with-fplr_files/figure-html/rank%20changes-1.svg" width="100%" /></p>
<p>The “elbow” in this chart comes at a similar time to when my rank began to level off, somewhat. You might have noticed the spike in the penultimate gameweek - in this instance, lots of players actually played twice (known as a “double gameweek” to insiders), meaning a greater opportunity for big swings in user rankings.</p>
</div>
<div id="team-value" class="section level2">
<h2>Team value</h2>
<p>Another factor perceived to be important in gaining a healthy position for high scores is that of team value. As football players in the game perform well (or not so well), their price actually changes as a function of market forces i.e. how many users are transferring them into/out of their team? By ‘playing the market’, users can build up the money at their disposal with which to build the best team. Therefore, perhaps we would expect someone’s final team value to be a good predictor of their final rank (N.B. one outlier was removed from this plot - sometimes people chase the team value as a game in itself, incurring lots of points penalties that drastically affect their team’s points total. This was one of those cases).</p>
<p>To show a fairer picture, I have attempted to remove ‘dead’ users i.e. users that have given up on the game, while their team continues to register scores. To eliminate these zombie teams, I chose to use transfers (bringing a player in for an existing squad player) as a proxy. It is fairly safe to assume that users remaining active until the season end are also making (at least some) transfers up until the end of the season, too. I’ll consider users who made a transfer in one of the final three gameweeks as ‘live’.</p>
<p><img src="/blog/fpl-mythbusting-with-fplr_files/figure-html/team%20val-1.svg" width="100%" /></p>
<p>There’s a moderate positive correlation, but plenty of variation as well - as was the case in our outlier, it is possible that users may chase team value at the expense of their league performance. Still, we can say that there appears to be a relationship between retaining a high team value and ranking highly.</p>
</div>
<div id="taking-hits" class="section level2">
<h2>“Taking Hits”</h2>
<p>While one free transfer is permitted each week, users can make additional transfers at a cost of 4 points each - known as “taking a hit”. This is a frequently toiled upon decision by FPL users, who must decide whether making this move will return a greater number of points (considering the penalty) than sticking. Perhaps the frequency someone incurs hits can tell us something about performance (again, I’ve removed an outlier incurring a huge number of these).</p>
<p><img src="/blog/fpl-mythbusting-with-fplr_files/figure-html/hits-1.svg" width="100%" /></p>
<p>It appears that taking hits has very little correlation with a user’s rank. This would suggest that there are indeed good ‘hits’, as users are able to get a high rank while racking them up. At the same time, this illuminates other playing styles that can also bring success i.e. users who refrain from taking ‘hits’ are able to get as high rank as those that do.</p>
</div>
<div id="picking-the-bench" class="section level2">
<h2>Picking the bench</h2>
<p>Every user talks about the time they left that weeks hot player on the bench (each gameweek, you must choose a starting 11 players - if they play, your back-up players, or ‘bench’, do not play and do not collect points). This often leads to disgruntled folk who hold dear the belief that some kind of FPL God is consistently against them. If we look at users’ benches across the season, how much variation is there?</p>
<p><img src="/blog/fpl-mythbusting-with-fplr_files/figure-html/bench-1.svg" width="100%" /></p>
<p>What we see is close to a normal distribution. So, probably no FPL God’s retribution. Most people benched somewhere in the region of 150-300 points over the course of a season, with an unlucky/lucky few coming in higher or lower respectively.</p>
</div>
<div id="bandwagons" class="section level2">
<h2>Bandwagons</h2>
<p>Another phenomenon, representing something of an FPL meta-game, is that of the “bandwagon”. This refers to times when certain players put in particularly explosive performances, triggering big movements in the market (i.e. lots of people bringing them in, similar to a hot stock). When were the biggest transfer booms?</p>
<p><img src="/blog/fpl-mythbusting-with-fplr_files/figure-html/bandwagons-1.svg" width="100%" /></p>
<p>Dele Alli had the biggest influx of transfers all season in gameweek 21, after a masterclass against Chelsea. Incidentally, both the 2nd (Ibrahimovic) and 3rd (Gundogan) highest net transfers followed games against West Brom.</p>
<p>As for the biggest net losses, these mostly belonged to players of high ownership who suffered serious injuries/suspensions. The most interesting case is that of Diego Costa, who was the center of a media frenzy claiming a (real-life) transfer to China was imminent (this never materialized).</p>
<p>Of course, these absolute swings are largely governed by a player’s initial ownership size and profile. We can look at percentage changes in ownership of players to consider those who had large <em>relative</em> shifts in selection.</p>
<p><img src="/blog/fpl-mythbusting-with-fplr_files/figure-html/bandwagon%20relative-1.svg" width="100%" /></p>
<p>Here we see huge percentage increases in the ownership of Fer and Stuani after promising displays on the opening day of the season and second gameweek, respectively. It is often in the very early stages that users scramble for players, often after just a single good performance, as there are few data points to go by otherwise. Jesus and Gabbiadini were actually both new arrivals to the game in the mid-season transfer window (in January, clubs can buy additional players) who started well - again, in the absence of any long-term trend, users rushed to scoop up these players.</p>
<p>Of course, the % drop in ownership is naturally capped (ownership can only fall by 100%). Interestingly, just two games after Jesus’ huge upswing in ownership, he gave us the biggest fall (<strong>almost 90%</strong> of owners dropped him)! If that’s not Murphy’s Law in full effect, I don’t know what is.</p>
</div>
<div id="how-often-are-the-top-players-hot" class="section level2">
<h2>How often are the top players hot?</h2>
<p>Come the end of the season, we check the top point-scoring players and yearn for what might’ve been if we’d snapped them up at the right time. How much love did the top (eight) overall point scorers actually get from FPL users over the season, and when?</p>
<p><img src="/blog/fpl-mythbusting-with-fplr_files/figure-html/streaks%20two-1.svg" width="100%" /></p>
<p>We see very different relationships between certain players and the transfer market. De Bruyne remains exceptionally stable in ownership after a couple of early season swings, while Kane’s ownership is volatile throughout. Some of this will be determined by player availability (i.e. were they injured/suspended), but also by how much variation there is in their points-scoring. Do we see consistency in the performance level of these players?</p>
<p><img src="/blog/fpl-mythbusting-with-fplr_files/figure-html/streaks%20three-1.svg" width="100%" /></p>
<p>By applying a moving average in the above chart (each data point is an average of the last five gameweeks), we can imagine performance in terms of season phases. For someone like De Bruyne, we notice that his peak performances came at the very start and end of the season, which perhaps explains the tepid market in the middle of the season. In a similar fashion, we can identify ‘purple patches’ of players, like Alli in the season middle. Much of FPL success can be determined by ensuring ownership of these players during such patches.</p>
</div>
<div id="wrap-up" class="section level2">
<h2>Wrap-up</h2>
<p>I hope this illustrates some of the possibilities available with the <code>fplR</code> package. I had a lot of fun making it, and look forward to using it to better understand my FPL experience. Do share any interesting things you’re able to do with it (or any things that go wrong with it…), and <em>try</em> to enjoy the new season. It’s just a game…</p>
</div>
<div class="footnotes">
<hr />
<ol>
<li id="fn1"><p>In this post I have referred to actual footballers as ‘players’, and players of the FPL game as ‘users’.<a href="#fnref1">↩</a></p></li>
</ol>
</div>

      
    </div>
    
  </div>
</section>


<section class="section">
  <div class="container has-text-centered">
    <p>&copy; Ewen Henderson </a> 2017-18</p>
    
  </div>
</section>

</body>
</html>

