<!DOCTYPE html>
<html lang='en'>

<head>
  <meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='description' content='I made a new R package (I understand üî•üì¶üî• is the correct term) this week. My sophomore post on this site (from way back in March) was a text-based analysis of Kanye West records, which exposed me to the Genius API1 once I wanted to get hold of some lyrical content. In the process, I wrote some functions for playing nicely with this API in R that I knew would probably be handy for others dabbling/wanting to dabble in similar matters.'>

<meta property='og:title' content='Introducing geniusr ‚Ä¢ ewenme'>
<meta property='og:description' content='I made a new R package (I understand üî•üì¶üî• is the correct term) this week. My sophomore post on this site (from way back in March) was a text-based analysis of Kanye West records, which exposed me to the Genius API1 once I wanted to get hold of some lyrical content. In the process, I wrote some functions for playing nicely with this API in R that I knew would probably be handy for others dabbling/wanting to dabble in similar matters.'>
<meta property='og:url' content='https://ewenme.rbind.io/blog/2017-12-06-introducing_geniusr/'>
<meta property='og:site_name' content='ewenme'>
<meta property='og:type' content='article'><meta property='article:section' content='Blog'><meta property='article:tag' content='R'><meta property='article:tag' content='Package'><meta property='article:tag' content='Genius'><meta property='article:tag' content='API'><meta property='article:published_time' content='2017-12-06T00:00:00Z'/><meta property='article:modified_time' content='2017-12-06T00:00:00Z'/>

<meta name="generator" content="Hugo 0.20.7" />

  <title>Introducing geniusr ‚Ä¢ ewenme</title>
  <link rel='canonical' href='https://ewenme.rbind.io/blog/2017-12-06-introducing_geniusr/'>
  
  <link rel='icon' href='/favicon.ico'>
<link rel='stylesheet' href='https://fonts.googleapis.com/css?family=Ubuntu:400,400i,700&subset=latin'>
<link rel='stylesheet' href='/css/main.d02777fd.css'>

  <link rel='stylesheet' href='/css/custom.css'>


<script>
window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
ga('create', 'UA-98719738-1', 'auto');
ga('send', 'pageview');
</script>
<script async src='//www.google-analytics.com/analytics.js'></script>


</head>

<link href="//cdn.bootcss.com/highlight.js/9.12.0/styles/codepen-embed.min.css" rel="stylesheet">

<link href='//fonts.googleapis.com/css?family=Work%20Sans' rel='stylesheet' type='text/css'>
<link href='//fonts.googleapis.com/css?family=Open%20Sans' rel='stylesheet' type='text/css'>

<style>
body {
    font-family: 'Work Sans';
}

.title, h1, h2, h3,
h4, h5, h6 {
    font-family: 'Open Sans';
}
</style>
<body class='page'>
  <div class='site'>
    <header id='header' class='header-container'>
      <div class='site-header'>
        <nav id='navmenu' aria-label='Main Menu'>
  <ul class='main-menu'>
    
    <li>
      <a href='/' 
        
      >home</a>
    </li>
    
    <li>
      <a href='/blog' 
        
      >blog</a>
    </li>
    
    <li>
      <a href='/projects/' 
        
      >Projects</a>
    </li>
    
    <li>
      <a href='/about/' 
        
      >About</a>
    </li>
    
  </ul>
</nav>

        <div class='site-info'>
          
          <p class='site-title title'>ewenme</p>
          
          <p class='site-description'></p>
        </div>
      </div>
    </header>


<main class='main'>
  <article lang='en' class='entry'>
    <header class='entry-header'>
  <div class='entry-info'>
    <h1 class='entry-title title'>Introducing geniusr</h1>
    
  </div>
  
<div class='meta'>
  <span class='posted-on'>
    <svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <rect x="3" y="4" width="18" height="18" rx="2" ry="2"/>
  <line x1="16" y1="2" x2="16" y2="6"/>
  <line x1="8" y1="2" x2="8" y2="6"/>
  <line x1="3" y1="10" x2="21" y2="10"/>
  
</svg>

    <span class='screen-reader'>Posted on </span>
    <time class='date' datetime='2017-12-06T00:00:00Z'>06 Dec, 2017</time>
  </span>
  
  
  <span class='reading-time'>
    <svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <circle cx="12" cy="12" r="10"/>
  <polyline points="12 6 12 12 15 15"/> 
  
</svg>

    3 mins read
  </span>
  
</div>


</header>

    <div class='entry-content'>
  <p>I made a new R package (I understand üî•üì¶üî• is the correct term) this week. My <a href="https://ewenme.rbind.io/blog/2017-03-20-kanye_sentiment_analysis/">sophomore post on this site</a> (from way back in March) was a text-based analysis of Kanye West records, which exposed me to the <a href="https://genius.com/">Genius</a> API<a href="#fn1" class="footnoteRef" id="fnref1"><sup>1</sup></a> once I wanted to get hold of some lyrical content. In the process, I wrote some functions for playing nicely with this API in R that I knew would probably be handy for others dabbling/wanting to dabble in similar matters.</p>
<p>Since then, I‚Äôve found a window of time to build on and consolidate this work into a well-rounded package. <code>geniusr</code> is now <a href="https://cran.r-project.org/web/packages/geniusr/index.html">available on CRAN</a>. This is the tour.<a href="#fn2" class="footnoteRef" id="fnref2"><sup>2</sup></a></p>
<div id="searchin" class="section level2">
<h2>Searchin‚Äô</h2>
<p>The Genius API‚Äôs search capabilities allows for users to scan all hosted content on the site (i.e.¬†all songs). A couple of quick implementations exist in the package for retrieving artist (<code>search_artist()</code>) and song (<code>search_song()</code>) matches for search terms. Let‚Äôs start by looking for songs brought back by a simple search for ‚ÄúVersace‚Äù.</p>
<pre class="r"><code>versace_search &lt;- search_song(search_term = &quot;Versace&quot;) %&gt;% glimpse</code></pre>
<pre><code>## Observations: 10
## Variables: 5
## $ song_id         &lt;int&gt; 176872, 2898687, 182654, 183346, 176951, 20050...
## $ song_name       &lt;chr&gt; &quot;Versace (Remix) (Ft.¬†Drake)&quot;, &quot;Versace on the...
## $ song_lyrics_url &lt;chr&gt; &quot;https://genius.com/Migos-versace-remix-lyrics...
## $ artist_id       &lt;int&gt; 44080, 500, 1319, 554, 44080, 32397, 2236, 125...
## $ artist_name     &lt;chr&gt; &quot;Migos&quot;, &quot;Bruno Mars&quot;, &quot;Meek Mill&quot;, &quot;Tyga&quot;, &quot;M...</code></pre>
</div>
<div id="goin-meta" class="section level2">
<h2>Goin‚Äô Meta</h2>
<p>Wanna bring back some fuller information about a particular song (<code>get_song_meta()</code>), artist (<code>get_artist_meta()</code>) or album (<code>get_album_meta()</code>)? Well, now you can. Let‚Äôs test one out - how about investigating a classic Versace-themed track from our last search, ‚ÄòVersace‚Äô by Migos.</p>
<pre class="r"><code>versace_meta &lt;- get_song_meta(song_id = versace_search$song_id[5]) %&gt;% glimpse</code></pre>
<pre><code>## Observations: 1
## Variables: 13
## $ song_id            &lt;int&gt; 176951
## $ song_name          &lt;chr&gt; &quot;Versace&quot;
## $ song_lyrics_url    &lt;chr&gt; &quot;https://genius.com/Migos-versace-lyrics&quot;
## $ song_art_image_url &lt;chr&gt; &quot;https://images.genius.com/4fe960be500117d6...
## $ release_date       &lt;chr&gt; &quot;2013-07-09&quot;
## $ pageviews          &lt;int&gt; 88862
## $ annotation_count   &lt;int&gt; 29
## $ artist_id          &lt;int&gt; 44080
## $ artist_name        &lt;chr&gt; &quot;Migos&quot;
## $ artist_url         &lt;chr&gt; &quot;https://genius.com/artists/Migos&quot;
## $ album_id           &lt;int&gt; 36011
## $ album_name         &lt;chr&gt; &quot;Young Rich Niggas&quot;
## $ album_url          &lt;chr&gt; &quot;https://genius.com/albums/Migos/Young-rich...</code></pre>
<p>With this metadata, we can easily pull up the song‚Äôs artwork, for example. Why not.</p>
<pre class="r"><code>knitr::include_graphics(path = versace_meta$song_art_image_url)</code></pre>
<p><img src="https://images.genius.com/4fe960be500117d652f0e856ce0b61ce.316x316x1.jpg" width="75%" style="display: block; margin: auto;" /></p>
</div>
<div id="gettin-lyrical" class="section level2">
<h2>Gettin‚Äô Lyrical</h2>
<p>The package allows you to grab lyrics for tracks real quick, using the <code>scrape_lyrics_id()</code> (or <code>scrape_lyrics_url()</code>) function.<a href="#fn3" class="footnoteRef" id="fnref3"><sup>3</sup></a> While we‚Äôre at it, let‚Äôs call on <code>tidytext</code> and answer a question for the people - <em>just how much were the Migos chatting about ‚ÄúVersace‚Äù in ‚ÄòVersace‚Äô?</em></p>
<pre class="r"><code># get words proportion representation
versace_prop &lt;- scrape_lyrics_url(versace_meta$song_lyrics_url) %&gt;% unnest_tokens(word, 
    line) %&gt;% count(word) %&gt;% mutate(proportion = n/sum(n)) %&gt;% # was the word versace or the rest
mutate(versace_or_the_rest = if_else(word == &quot;versace&quot;, &quot;Versace&quot;, &quot;Not Versace&quot;)) %&gt;% 
    group_by(versace_or_the_rest) %&gt;% summarise(proportion = sum(proportion) * 
    100)

# waffle plot
parts &lt;- c(`Not Versace` = versace_prop$proportion[[1]], Versace = versace_prop$proportion[[2]])

waffle(parts, rows = 8, size = 1, colors = c(&quot;#3C3A32&quot;, &quot;#E3BD08&quot;), use_glyph = &quot;volume-up&quot;, 
    glyph_size = 10, title = &quot;How much Versace is in Migos - &#39;Versace&#39;?&quot;) + 
    labs(caption = &quot;@ewen_&quot;) + theme_void(base_family = &quot;Work Sans&quot;, base_size = 12) + 
    theme(legend.position = &quot;bottom&quot;)</code></pre>
<p><img src="/blog/2017-12-06-Introducing_geniusr_files/figure-html/lyrics-1.png" width="100%" /></p>
<p>The word ‚ÄúVersace‚Äù represents 32.5% of the lyrics in Migos - Versace. Phew.</p>
<p>That‚Äôs all for now, enjoy the package and keep up with future developments over at the <a href="https://github.com/ewenme/geniusr">GitHub repo</a>.</p>
<p><br></p>
</div>
<div class="footnotes">
<hr />
<ol>
<li id="fn1"><p>Genius‚Äô <a href="https://docs.genius.com/">documentation pages</a> are helpful if you want to know more about the API.<a href="#fnref1">‚Ü©</a></p></li>
<li id="fn2"><p>For installation &amp; authentication guidance, head for the <a href="https://github.com/ewenme/geniusr">README</a>.<a href="#fnref2">‚Ü©</a></p></li>
<li id="fn3"><p>As well as API helper functions, the package includes things that are scraping the Genius site (Genius‚Äô API doesn‚Äôt include lyrics, for example). Be sure to read the <a href="https://genius.com/static/terms">terms of service</a> in case of any concerns.<a href="#fnref3">‚Ü©</a></p></li>
</ol>
</div>

</div>

    
<footer class='entry-footer'>
  
    
      
      

<div class='tags'>
  <span class='tag-icon'>
    <svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <path d="M20.59,13.41l-7.17,7.17a2,2,0,0,1-2.83,0L2,12V2H12l8.59,8.59A2,2,0,0,1,20.59,13.41Z"/>
  <line x1="7" y1="7" x2="7" y2="7"/>
  
</svg>

  </span>
  <span class='screen-reader'>Tags: </span><a class='tag' href='/tags/r'>R</a>, <a class='tag' href='/tags/package'>Package</a>, <a class='tag' href='/tags/genius'>Genius</a>, <a class='tag' href='/tags/api'>API</a></div>

    
  
</footer>


  </article>

  

  
    <div class='comments-container'>
  <div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_shortname = 'http-ewenme-rbind-io';
    var disqus_identifier = 'https:\/\/ewenme.rbind.io\/blog\/2017-12-06-introducing_geniusr\/';
    var disqus_title = 'Introducing geniusr';
    var disqus_url = 'https:\/\/ewenme.rbind.io\/blog\/2017-12-06-introducing_geniusr\/';

    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</div>

  
</main>

    <footer id='footer' class='footer-container'>
      <div class='footer'>
        <div class='social'>
  <nav aria-label='Social Menu'>
    <ul class='social-menu'><li>
        <a href='mailto:ewenhenderson@gmail.com' target='_blank' rel='noopener'>
          <span class='screen-reader'>Open Email account in new tab</span>
          <svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/>
  <polyline points="22,6 12,13 2,6"/>
  
</svg>

        </a>
      </li><li>
        <a href='https://github.com/ewenme' target='_blank' rel='noopener'>
          <span class='screen-reader'>Open Github account in new tab</span>
          <svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"/>
  
</svg>

        </a>
      </li><li>
        <a href='https://twitter.com/ewen_' target='_blank' rel='noopener'>
          <span class='screen-reader'>Open Twitter account in new tab</span>
          <svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <path d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"/>
  
</svg>

        </a>
      </li></ul>
  </nav>
</div>
        <script src="//cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>
<script src="//cdn.bootcss.com/highlight.js/9.12.0/languages/r.min.js"></script>

<link href='//fonts.googleapis.com/css?family=Work%20Sans' rel='stylesheet' type='text/css'>
<link href='//fonts.googleapis.com/css?family=Open%20Sans' rel='stylesheet' type='text/css'>

<script>
hljs.configure({languages: []});
hljs.initHighlightingOnLoad();
</script>

        <div class='copyright'>
          <p>
<script src="//cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>
<script src="//cdn.bootcss.com/highlight.js/9.12.0/languages/r.min.js"></script>

<link href='//fonts.googleapis.com/css?family=Work%20Sans' rel='stylesheet' type='text/css'>
<link href='//fonts.googleapis.com/css?family=Open%20Sans' rel='stylesheet' type='text/css'>

<script>
hljs.configure({languages: []});
hljs.initHighlightingOnLoad();
</script>
    
  
  &copy; 2017 Ewen Henderson</p>

        </div>
      </div>
    </footer>

  </div>

  <script src='/js/main.af838dd5.js'></script>
  

</body>

</html>

