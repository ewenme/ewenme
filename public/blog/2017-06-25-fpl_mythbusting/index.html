<!DOCTYPE html>
<html lang='en'>

<head>
  <meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='description' content='I recently authored my first R package (and definitely have the bug, now). It would be remiss of me to continue without a quick PSA for anyone out there thinking about dabbling in the package game - below is a shout-out of the invaluable resources I found along the way that kept me nice and sane.
ease in https://t.co/NdRYGE1whA
more detail https://t.co/ypqotSAF46
best practice https://t.co/qRMZDXBdfQ
travis üíÄ https://t.co/dEvM3PWsVb ‚Äî ewen (@ewen_) June 7, 2017'>

<meta property='og:title' content='FPL Mythbusting with fplR ‚Ä¢ ewenme'>
<meta property='og:description' content='I recently authored my first R package (and definitely have the bug, now). It would be remiss of me to continue without a quick PSA for anyone out there thinking about dabbling in the package game - below is a shout-out of the invaluable resources I found along the way that kept me nice and sane.
ease in https://t.co/NdRYGE1whA
more detail https://t.co/ypqotSAF46
best practice https://t.co/qRMZDXBdfQ
travis üíÄ https://t.co/dEvM3PWsVb ‚Äî ewen (@ewen_) June 7, 2017'>
<meta property='og:url' content='https://ewenme.rbind.io/blog/2017-06-25-fpl_mythbusting/'>
<meta property='og:site_name' content='ewenme'>
<meta property='og:type' content='article'><meta property='article:section' content='Blog'><meta property='article:tag' content='blogdown'><meta property='article:tag' content='R'><meta property='article:tag' content='package'><meta property='article:published_time' content='2017-06-25T00:00:00Z'/><meta property='article:modified_time' content='2017-06-25T00:00:00Z'/>

<meta name="generator" content="Hugo 0.20.7" />

  <title>FPL Mythbusting with fplR ‚Ä¢ ewenme</title>
  <link rel='canonical' href='https://ewenme.rbind.io/blog/2017-06-25-fpl_mythbusting/'>
  
  <link rel='icon' href='/favicon.ico'>
<link rel='stylesheet' href='https://fonts.googleapis.com/css?family=Ubuntu:400,400i,700&subset=latin'>
<link rel='stylesheet' href='/css/main.d02777fd.css'>


<script>
window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
ga('create', 'UA-98719738-1', 'auto');
ga('send', 'pageview');
</script>
<script async src='//www.google-analytics.com/analytics.js'></script>


</head>

<link href="//cdn.bootcss.com/highlight.js/9.12.0/styles/tomorrow-night.min.css" rel="stylesheet">
<body class='page'>
  <div class='site'>
    <header id='header' class='header-container'>
      <div class='site-header'>
        <nav id='navmenu' aria-label='Main Menu'>
  <ul class='main-menu'>
    
    <li>
      <a href='/' 
        
      >home</a>
    </li>
    
    <li>
      <a href='/blog' 
        
      >blog</a>
    </li>
    
    <li>
      <a href='/projects/' 
        
      >Projects</a>
    </li>
    
    <li>
      <a href='/about/' 
        
      >About</a>
    </li>
    
  </ul>
</nav>

        <div class='site-info'>
          
          <p class='site-title title'>ewenme</p>
          
          <p class='site-description'></p>
        </div>
      </div>
    </header>


<main class='main'>
  <article lang='en' class='entry'>
    <header class='entry-header'>
  <div class='entry-info'>
    <h1 class='entry-title title'>FPL Mythbusting with fplR</h1>
    
  </div>
  
<div class='meta'>
  <span class='posted-on'>
    <svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <rect x="3" y="4" width="18" height="18" rx="2" ry="2"/>
  <line x1="16" y1="2" x2="16" y2="6"/>
  <line x1="8" y1="2" x2="8" y2="6"/>
  <line x1="3" y1="10" x2="21" y2="10"/>
  
</svg>

    <span class='screen-reader'>Posted on </span>
    <time class='date' datetime='2017-06-25T00:00:00Z'>2017, Jun 25</time>
  </span>
  
  
</div>


</header>

    <div class='entry-content'>
  <p><br></p>
<p>I recently authored my first R package (and definitely have the bug, now). It would be remiss of me to continue without a quick PSA for anyone out there thinking about dabbling in the package game - below is a shout-out of the invaluable resources I found along the way that kept me nice and sane.</p>
<blockquote class="twitter-tweet" data-lang="en">
<p lang="en" dir="ltr">
ease in <a href="https://t.co/NdRYGE1whA">https://t.co/NdRYGE1whA</a><br>more detail <a href="https://t.co/ypqotSAF46">https://t.co/ypqotSAF46</a><br>best practice <a href="https://t.co/qRMZDXBdfQ">https://t.co/qRMZDXBdfQ</a><br>travis üíÄ <a href="https://t.co/dEvM3PWsVb">https://t.co/dEvM3PWsVb</a>
</p>
‚Äî ewen (<span class="citation">@ewen_</span>) <a href="https://twitter.com/ewen_/status/872480326890795009">June 7, 2017</a>
</blockquote>
<script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script>
<p><br></p>
<p>In short, I set out on my package contribution journey by focusing on the development of something that I myself would find useful (that way, I could keep at least one user happy). Each year, I play an edition of fantasy sports called <a href="https://fantasy.premierleague.com/">Fantasy Premier League</a> (FPL), the official fantasy football game of England‚Äôs top football (or soccer for you stateside peeps) division. If you really want to know the in‚Äôs and out‚Äôs of FPL, there‚Äôs a <a href="https://fantasy.premierleague.com/a/help">section of the site</a> just for rules. TL;DR: for 38 rounds (called ‚Äògameweeks‚Äô), you pick a team of football players to do good things that score you points and help you finish as high up the leader-board as possible.<a href="#fn1" class="footnoteRef" id="fnref1"><sup>1</sup></a></p>
<p>It just so happens that we‚Äôre in the off-season right now, and I figured I should use this down-time to explore how R could assist with FPL users‚Äô exploits in the coming season.<a href="#fn2" class="footnoteRef" id="fnref2"><sup>2</sup></a></p>
<p><img src="https://raw.githubusercontent.com/ewenme/fplR/master/fplHex.png" width="80%" style="display: block; margin: auto;" /></p>
<p>Introducing‚Ä¶<a href="https://ewenme.github.io/fplR/"><code>fplR</code></a> - a package for the strange intersection of FPL / R users like me (I hope it‚Äôs not just me) to explore the game‚Äôs data. In the rest of this post, I want to test drive the package by first pulling out some insights on my most recent season (2016/2017), and then do some exploring of the mythical quirks of FPL as a bit of fun.<a href="#fn3" class="footnoteRef" id="fnref3"><sup>3</sup></a></p>
<p><br></p>
<div id="how-did-i-do-last-season" class="section level2">
<h2>How did I do last season?</h2>
<p>As the game updates each user‚Äôs scores following the day‚Äôs matches, the site helpfully tells you your ranking (overall, in your country, in any mini-leagues you are part of, etc.). Still, just knowing your performance at one point in time does not begin to capture the season‚Äôs journey (read: roller-coaster of emotions and deep suffering). Time to dive into <code>fplR</code> to see if it can help.</p>
<pre class="r"><code># get my fpl season performance
myPerformance &lt;- userPerformance(137633)</code></pre>
<p><img src="/blog/2017-06-25-FPL_mythbusting_files/figure-html/last%20season%20plot-1.png" width="100%" /></p>
<p>The sharp decline in my ranking around gameweek #5 looks striking, as is the fightback to something respectable in gameweeks 7-10. However, bigger variations in the earlier gameweeks are to be expected - the sample size is small, therefore the pack is close, so to speak (more on this, shortly). Nevertheless, my final rank was a personal best of 4,752nd in the world. (I hope that establishes my credentials, nice and early). Having spent so long invested in something, it‚Äôs really nice to just be able to reflect on it with this visual accompaniment.</p>
<p><br></p>
</div>
<div id="fpl-mythbusting" class="section level2">
<h2>FPL mythbusting</h2>
<p>Next, I‚Äôll take some time to examine some aspects of the game that the FPL community has debated on since the beginning of time. I won‚Äôt necessarily dispel/confirm all of these things here, but it‚Äôs a taster of what kinds of analyses can be spun up quickly using <code>fplR</code>.</p>
<p><br></p>
<div id="the-early-season-rat-race" class="section level3">
<h3>The early season rat race</h3>
<p>Many users emphasise the importance of a good start, claiming that it is more difficult to do well in the latter stages of the season without a solid foundation built early on. To illustrate this, lets look at the average shift in overall rank by gameweek in one of my mini-leagues (a smaller league amongst a peer group) as the season progresses i.e.¬†how much does a users rank change from week-to-week (N.B. in the current package version, I haven‚Äôt developed a function to help make this easier, yet. Soon come)?</p>
<p><img src="/blog/2017-06-25-FPL_mythbusting_files/figure-html/rank%20changes-1.png" width="100%" /></p>
<p>The ‚Äúelbow‚Äù in this chart comes at a similar time to when my rank began to level off, somewhat. You might have noticed the spike in the penultimate gameweek - in this instance, lots of players actually played twice (known as a ‚Äúdouble gameweek‚Äù to insiders), meaning a greater opportunity for big swings in user rankings.</p>
<p><br></p>
</div>
<div id="team-value" class="section level3">
<h3>Team value</h3>
<p>Another factor perceived to be important in gaining a healthy position for high scores is that of team value. As football players in the game perform well (or not so well), their price actually changes as a function of market forces i.e.¬†how many users are transferring them into/out of their team? By ‚Äòplaying the market‚Äô, users can build up the money at their disposal with which to build the best team. Therefore, perhaps we would expect someone‚Äôs final team value to be a good predictor of their final rank (N.B. one outlier was removed from this plot - sometimes people chase the team value as a game in itself, incurring lots of points penalties that drastically affect their team‚Äôs points total. This was one of those cases).</p>
<p>To show a fairer picture, I have attempted to remove ‚Äòdead‚Äô users i.e.¬†users that have given up on the game, while their team continues to register scores. To eliminate these zombie teams, I chose to use transfers (bringing a player in for an existing squad player) as a proxy. It is fairly safe to assume that users remaining active until the season end are also making (at least some) transfers up until the end of the season, too. I‚Äôll consider users who made a transfer in one of the final three gameweeks as ‚Äòlive‚Äô.</p>
<p><img src="/blog/2017-06-25-FPL_mythbusting_files/figure-html/team%20val-1.png" width="100%" /></p>
<p>There‚Äôs a moderate positive correlation, but plenty of variation as well - as was the case in our outlier, it is possible that users may chase team value at the expense of their league performance. Still, we can say that there appears to be a relationship between retaining a high team value and ranking highly.</p>
<p><br></p>
</div>
<div id="taking-hits" class="section level3">
<h3>‚ÄúTaking Hits‚Äù</h3>
<p>While one free transfer is permitted each week, users can make additional transfers at a cost of 4 points each - known as ‚Äútaking a hit‚Äù. This is a frequently toiled upon decision by FPL users, who must decide whether making this move will return a greater number of points (considering the penalty) than sticking. Perhaps the frequency someone incurs hits can tell us something about performance (again, I‚Äôve removed an outlier incurring a huge number of these).</p>
<p><img src="/blog/2017-06-25-FPL_mythbusting_files/figure-html/hits-1.png" width="100%" /></p>
<p>It appears that taking hits has very little correlation with a user‚Äôs rank. This would suggest that there are indeed good ‚Äòhits‚Äô, as users are able to get a high rank while racking them up. At the same time, this illuminates other playing styles that can also bring success i.e.¬†users who refrain from taking ‚Äòhits‚Äô are able to get as high rank as those that do.</p>
<p><br></p>
</div>
<div id="picking-the-bench" class="section level3">
<h3>Picking the bench</h3>
<p>Every user talks about the time they left that weeks hot player on the bench (each gameweek, you must choose a starting 11 players - if they play, your back-up players, or ‚Äòbench‚Äô, do not play and do not collect points). This often leads to disgruntled folk who hold dear the belief that some kind of FPL God is consistently against them. If we look at users‚Äô benches across the season, how much variation is there?</p>
<p><img src="/blog/2017-06-25-FPL_mythbusting_files/figure-html/bench-1.png" width="100%" /></p>
<p>What we see is close to a normal distribution. So, probably no FPL God‚Äôs retribution. Most people benched somewhere in the region of 150-300 points over the course of a season, with an unlucky/lucky few coming in higher or lower respectively.</p>
<p><br></p>
</div>
<div id="bandwagons" class="section level3">
<h3>Bandwagons</h3>
<p>Another phenomenon, representing something of an FPL meta-game, is that of the ‚Äúbandwagon‚Äù. This refers to times when certain players put in particularly explosive performances, triggering big movements in the market (i.e.¬†lots of people bringing them in, similar to a hot stock). When were the biggest transfer booms?</p>
<p><img src="/blog/2017-06-25-FPL_mythbusting_files/figure-html/bandwagons-1.png" width="100%" /></p>
<p>Dele Alli had the biggest influx of transfers all season in gameweek 21, after a masterclass against Chelsea. Incidentally, both the 2nd (Ibrahimovic) and 3rd (Gundogan) highest net transfers followed games against West Brom.</p>
<p>As for the biggest net losses, these mostly belonged to players of high ownership who suffered serious injuries/suspensions. The most interesting case is that of Diego Costa, who was the center of a media frenzy claiming a (real-life) transfer to China was imminent (this never materialized).</p>
<p>Of course, these absolute swings are largely governed by a player‚Äôs initial ownership size and profile. We can look at percentage changes in ownership of players to consider those who had large <em>relative</em> shifts in selection.</p>
<p><img src="/blog/2017-06-25-FPL_mythbusting_files/figure-html/bandwagon%20relative-1.png" width="100%" /></p>
<p>Here we see huge percentage increases in the ownership of Fer and Stuani after promising displays on the opening day of the season and second gameweek, respectively. It is often in the very early stages that users scramble for players, often after just a single good performance, as there are few data points to go by otherwise. Jesus and Gabbiadini were actually both new arrivals to the game in the mid-season transfer window (in January, clubs can buy additional players) who started well - again, in the absence of any long-term trend, users rushed to scoop up these players.</p>
<p>Of course, the % drop in ownership is naturally capped (ownership can only fall by 100%). Interestingly, just two games after Jesus‚Äô huge upswing in ownership, he gave us the biggest fall (<strong>almost 90%</strong> of owners dropped him)! If that‚Äôs not Murphy‚Äôs Law in full effect, I don‚Äôt know what is.</p>
<p><br></p>
</div>
<div id="how-often-are-the-top-players-hot" class="section level3">
<h3>How often are the top players hot?</h3>
<p>Come the end of the season, we check the top point-scoring players and yearn for what might‚Äôve been if we‚Äôd snapped them up at the right time. How much love did the top (eight) overall point scorers actually get from FPL users over the season, and when?</p>
<p><img src="/blog/2017-06-25-FPL_mythbusting_files/figure-html/streaks%20two-1.png" width="100%" /></p>
<p>We see very different relationships between certain players and the transfer market. De Bruyne remains exceptionally stable in ownership after a couple of early season swings, while Kane‚Äôs ownership is volatile throughout. Some of this will be determined by player availability (i.e.¬†were they injured/suspended), but also by how much variation there is in their points-scoring. Do we see consistency in the performance level of these players?</p>
<p><img src="/blog/2017-06-25-FPL_mythbusting_files/figure-html/streaks%20three-1.png" width="100%" /></p>
<p>By applying a moving average in the above chart (each data point is an average of the last five gameweeks), we can imagine performance in terms of season phases. For someone like De Bruyne, we notice that his peak performances came at the very start and end of the season, which perhaps explains the tepid market in the middle of the season. In a similar fashion, we can identify ‚Äòpurple patches‚Äô of players, like Alli in the season middle. Much of FPL success can be determined by ensuring ownership of these players during such patches.</p>
<p><br></p>
</div>
</div>
<div id="wrap-up" class="section level2">
<h2>Wrap-up</h2>
<p>I hope this illustrates some of the possibilities available with the <code>fplR</code> package. I had a lot of fun making it, and look forward to using it to better understand my FPL experience. Do share any interesting things you‚Äôre able to do with it (or any things that go wrong with it‚Ä¶), and <em>try</em> to enjoy the new season. It‚Äôs just a game‚Ä¶</p>
<p><br></p>
</div>
<div class="footnotes">
<hr />
<ol>
<li id="fn1"><p>In this post I have referred to actual footballers as ‚Äòplayers‚Äô, and players of the FPL game as ‚Äòusers‚Äô.<a href="#fnref1">‚Ü©</a></p></li>
<li id="fn2"><p>At current, the FPL site only keeps detailed data for the <em>current</em> season. Therefore, some of the data used in this analysis will likely be unavailable once the new FPL season begins. For access to all data used in this analysis, please go <a href="https://github.com/rbind/ewenme/blob/master/content/data/fplR.RData">here</a>.<a href="#fnref2">‚Ü©</a></p></li>
<li id="fn3"><p>To keep the post concise I don‚Äôt show all of the code, especially code that generates figures. But you can find the full code <a href="https://github.com/rbind/ewenme/blob/master/content/blog/2017-06-19-FPL_mythbusting.Rmd">here</a>.<a href="#fnref3">‚Ü©</a></p></li>
</ol>
</div>

</div>

    
<footer class='entry-footer'>
  
    
      
      

<div class='tags'>
  <span class='tag-icon'>
    <svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <path d="M20.59,13.41l-7.17,7.17a2,2,0,0,1-2.83,0L2,12V2H12l8.59,8.59A2,2,0,0,1,20.59,13.41Z"/>
  <line x1="7" y1="7" x2="7" y2="7"/>
  
</svg>

  </span>
  <span class='screen-reader'>Tags: </span><a class='tag' href='/tags/blogdown'>blogdown</a>, <a class='tag' href='/tags/r'>R</a>, <a class='tag' href='/tags/package'>package</a></div>

    
  
</footer>


  </article>

  
    
<nav class='entry-nav'>
  <div class='entry-nav-links'><div class='prev-entry'>
      <a href='https://ewenme.rbind.io/blog/2017-05-30-geofacet_ldn_pubs/'>
        <span aria-hidden='true'><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <line x1="20" y1="12" x2="4" y2="12"/>
  <polyline points="10 18 4 12 10 6"/>
  
</svg>
 Previous</span>
        <span class='screen-reader'>Previous post: </span>Exploring London&#39;s Pubs &amp; Bars with geofacet</a>
    </div><div class='next-entry'>
      <a href='https://ewenme.rbind.io/blog/2017-07-27-open_policing_sparklyr_shiny/'>
        <span class='screen-reader'>Next post: </span>Advocating for Open Policing with sparklyr and Shiny<span aria-hidden='true'>Next <svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <line x1="4" y1="12" x2="20" y2="12"/>
  <polyline points="14 6 20 12 14 18"/>
  
</svg>
</span>
      </a>
    </div></div>
</nav>


  

  
    <div class='comments-container'>
  <div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_shortname = 'http-ewenme-rbind-io';
    var disqus_identifier = 'https:\/\/ewenme.rbind.io\/blog\/2017-06-25-fpl_mythbusting\/';
    var disqus_title = 'FPL Mythbusting with fplR';
    var disqus_url = 'https:\/\/ewenme.rbind.io\/blog\/2017-06-25-fpl_mythbusting\/';

    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</div>

  
</main>

    <footer id='footer' class='footer-container'>
      <div class='footer'>
        <div class='social'>
  <nav aria-label='Social Menu'>
    <ul class='social-menu'><li>
        <a href='mailto:ewenhenderson@gmail.com' target='_blank' rel='noopener'>
          <span class='screen-reader'>Open Email account in new tab</span>
          <svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/>
  <polyline points="22,6 12,13 2,6"/>
  
</svg>

        </a>
      </li><li>
        <a href='https://github.com/ewenme' target='_blank' rel='noopener'>
          <span class='screen-reader'>Open Github account in new tab</span>
          <svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"/>
  
</svg>

        </a>
      </li><li>
        <a href='https://twitter.com/ewen_' target='_blank' rel='noopener'>
          <span class='screen-reader'>Open Twitter account in new tab</span>
          <svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <path d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"/>
  
</svg>

        </a>
      </li></ul>
  </nav>
</div>
        <script src="//cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>
<script src="//cdn.bootcss.com/highlight.js/9.12.0/languages/r.min.js"></script>

<script>
hljs.configure({languages: []});
hljs.initHighlightingOnLoad();
</script>

        <div class='copyright'>
          <p>
  &copy; 2017 ewenme</p>

        </div>
      </div>
    </footer>

  </div>

  <script src='/js/main.af838dd5.js'></script>
  

</body>

</html>

